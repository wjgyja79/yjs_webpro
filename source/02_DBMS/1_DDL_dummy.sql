-- ♠ 테이블 & 시퀀스 삭제(CUSTOMER -> CUS_LEVEL)
DROP TABLE CUSTOMER; -- 참조테이블(자식테이블)이 있을 경우 삭제불가
--DROP TABLE CUSTOMER CASCADE CONSTRAINTS; -- 참조테이블이 있을 경우 삭제
DROP TABLE CUS_LEVEL;
DROP SEQUENCE CUSTOMER_CID_SEQ;

-- ♠ 테이블 & 시퀀스 생성(CUS_LEVEL -> CUSTOMER)
CREATE TABLE CUS_LEVEL (
  levelNO   NUMBER(1)    PRIMARY KEY,
  levelNAME VARCHAR2(20) NOT NULL,
  LOW       NUMBER(9)    NOT NULL,
  HIGH      NUMBER(9)    NOT NULL
);
CREATE SEQUENCE CUSTOMER_CID_SEQ
  MAXVALUE 999999999 NOCACHE NOCYCLE;
CREATE TABLE CUSTOMER (
  cID     NUMBER(9)    PRIMARY KEY,
  cTEL    VARCHAR2(30) UNIQUE,
  cNAME   VARCHAR2(30) NOT NULL,
  cPOINT  NUMBER(6)    DEFAULT 1000 NOT NULL CHECK(cPOINT>=0),
  cAMOUNT NUMBER(9)    DEFAULT 0 NOT NULL,
  LEVELNO NUMBER(1)    DEFAULT 1 REFERENCES CUS_LEVEL(LEVELNO) NOT NULL,
  cMEMO   CLOB
);
-- ♠ 더미데이터 입력(CUS_LEVEL -> CUSTOMER)
INSERT INTO CUS_LEVEL VALUES (1, 'NORMAL', 0, 999999);
INSERT INTO CUS_LEVEL VALUES (2, 'SILVER', 1000000, 1999999);
INSERT INTO CUS_LEVEL VALUES (3, 'GOLD', 2000000, 2999999);
INSERT INTO CUS_LEVEL VALUES (4, 'VIP', 3000000, 3999999);
INSERT INTO CUS_LEVEL VALUES (5, 'VVIP', 4000000, 999999999);
SELECT * FROM CUS_LEVEL;
INSERT INTO CUSTOMER (cID, cTEL, cNAME)
  VALUES (CUSTOMER_CID_SEQ.NEXTVAL, '010-9999-9999', '홍길동');
INSERT INTO CUSTOMER
  VALUES (CUSTOMER_CID_SEQ.NEXTVAL, '010-8888-9999', '김길동', 0, 4000000, 5, NULL);
INSERT INTO CUSTOMER
  VALUES (CUSTOMER_CID_SEQ.NEXTVAL, '010-7777-7777', '신길동', 0, 1500000, 2, '배달로만');
SELECT * FROM CUSTOMER;
COMMIT;